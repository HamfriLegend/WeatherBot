# API и Телеграм Бот для прогноза погоды
- --
## Описание
Телеграм бот и API для получения прогноза погоды, со следующими функциями:
* выдавать прогноз погоды по городам
* сохранять город для пользователя\
*Используемые технологии: Python 3.12, PostgreSQL*
- --
## Запуск
Перед запуском создайте в корневой папке файл `.env` со следующими переменными (пример):
* DB_PORT=Порт БД
* DB_USER=Логин к БД
* DB_PASS=Пароль к БД
* DB_HOST=Хост БД
* DB_NAME=Название БД
* API_KEY="Ключ API от OpenWeatherMap"
* BOT_TOKEN="Токен телеграм бота"

Установите зависимости:
```bash
pip install -r requirements.txt
```
Запустите проект:
```bash
python -m uvicorn main:app --reload
```
Первый запуск автоматически создаст таблицы в базе данных.

- --

## Использование
У API есть два основных маршрута:
* /logs - Просмотр истории запросов
* /logs/user/{user_id} - Просмотр истории запросов конкретного пользователя

Телеграм бот принимает команду **/weather <город>**. Данные для пользователя сохраняются, чтобы выдать ему прошлый город в котором он искал.
Кроме этого данные по городу хешируются на 2 часа.